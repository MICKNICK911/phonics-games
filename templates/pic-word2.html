<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emoji Letter Match Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            background-color: rgba(255, 255, 255, 0.92);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            width: 100%;
            max-width: 500px;
            padding: 30px;
            text-align: center;
        }
        
        h1 {
            color: #2575fc;
            margin-bottom: 20px;
            font-size: 2.5rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .screen {
            display: none;
        }
        
        .active {
            display: block;
        }
        
        .emoji-display {
            font-size: 8rem;
            margin: 30px 0;
            text-align: center;
            height: 180px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .audio-btn {
            background: linear-gradient(to right, #ff8a00, #da1b60);
            color: white;
            border: none;
            border-radius: 50px;
            padding: 15px 30px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            margin: 20px 0;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s;
        }
        
        .audio-btn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
        }
        
        .audio-btn:active:not(:disabled) {
            transform: translateY(1px);
        }
        
        .audio-btn:disabled {
            background: #cccccc;
            color: #666666;
            cursor: not-allowed;
        }
        
        .options-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 30px 0;
        }
        
        .option {
            background: #f0f8ff;
            border: 3px solid #2575fc;
            border-radius: 12px;
            padding: 20px 10px;
            font-size: 2.5rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            color: #333;
            text-transform: uppercase;
        }
        
        .option:hover:not(:disabled) {
            background: #e1f0ff;
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(37, 117, 252, 0.3);
        }
        
        .option:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .option.selected {
            background: #ffd700;
        }
        
        .option.correct {
            background: #4CAF50;
            color: white;
        }
        
        .option.incorrect {
            background: #f44336;
            color: white;
        }
        
        .game-info {
            display: flex;
            justify-content: space-between;
            background: rgba(37, 117, 252, 0.1);
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            font-weight: bold;
            color: #2575fc;
        }
        
        .btn {
            background: #2575fc;
            color: white;
            border: none;
            border-radius: 50px;
            padding: 15px 30px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            margin: 20px 10px 0;
            transition: all 0.3s;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }
        
        .btn:hover:not(:disabled) {
            background: #1a5fd0;
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.25);
        }
        
        .btn:active:not(:disabled) {
            transform: translateY(1px);
        }
        
        .btn:disabled {
            background: #cccccc;
            color: #666666;
            box-shadow: none;
            cursor: not-allowed;
        }
        
        .correct-screen, .gameover-screen, .congrats-screen {
            padding: 30px 0;
        }
        
        .result-icon {
            font-size: 8rem;
            margin: 20px 0;
        }
        
        .correct-icon {
            color: #4CAF50;
        }
        
        .incorrect-icon {
            color: #f44336;
        }
        
        .congrats-icon {
            color: #FFC107;
        }
        
        .message {
            font-size: 2rem;
            margin: 20px 0;
            color: #333;
        }
        
        .stats {
            background: rgba(37, 117, 252, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin: 30px 0;
        }
        
        .stat {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            font-size: 1.2rem;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .stat:last-child {
            border-bottom: none;
        }
        
        .progress-container {
            background: #e0e0e0;
            border-radius: 10px;
            height: 20px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(to right, #ff8a00, #da1b60);
            border-radius: 10px;
            transition: width 0.5s;
        }
        
        .instructions {
            background: rgba(37, 117, 252, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: left;
        }
        
        .instructions h3 {
            color: #2575fc;
            margin-bottom: 10px;
        }
        
        .instructions p {
            margin: 8px 0;
        }
        
        .letter-display {
            font-size: 4rem;
            font-weight: bold;
            color: #2575fc;
            margin: 20px 0;
            text-align: center;
        }
        
        .navigation {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
        }
        
        @media (max-width: 500px) {
            .container {
                padding: 15px;
            }
            
            .emoji-display {
                font-size: 6rem;
                height: 150px;
            }
            
            .option {
                font-size: 2rem;
                padding: 15px 5px;
            }
            
            h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container" role="main">
        <h1>Emoji Letter Match</h1>
        
        <!-- Start Screen -->
        <div id="start-screen" class="screen active" role="region" aria-label="Start Screen">
            <div class="emoji-display" aria-hidden="true">üéÆ</div>
            <p class="message">Match the letter to the emoji!</p>
            
            <div class="instructions">
                <h3>How to Play:</h3>
                <p>1. Tap the speaker button to hear the word</p>
                <p>2. Find the correct starting letter (or ending letter for 'x')</p>
                <p>3. Select the matching letter from the options</p>
                <p>4. Get it right to advance to the next word</p>
                <p>5. One wrong answer ends the game!</p>
            </div>
            
            <button id="start-btn" class="btn">Start Game</button>
            <button id="practice-btn" class="btn">Practice Mode</button>
        </div>
        
        <!-- Game Screen -->
        <div id="game-screen" class="screen" role="region" aria-label="Game Screen">
            <div class="game-info">
                <div class="score">Score: <span id="score">0</span>/<span id="total">0</span></div>
                <div class="timer">Time: <span id="timer">0</span>s</div>
            </div>
            
            <div class="progress-container">
                <div class="progress-bar" id="progress-bar" style="width: 0%" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
            
            <div class="emoji-display" id="emoji-display" aria-hidden="true">üçè</div>
            
            <button id="audio-btn" class="audio-btn" aria-label="Play audio">üîä Hear the word</button>
            
            <div class="options-container" id="options-container" role="radiogroup">
                <!-- Options will be generated here -->
            </div>
        </div>
        
        <!-- Correct Answer Screen -->
        <div id="correct-screen" class="screen correct-screen" role="region" aria-label="Correct Answer Screen">
            <div class="result-icon correct-icon" aria-hidden="true">‚úì</div>
            <p class="message">Correct!</p>
            <button id="next-btn" class="btn">Next Word</button>
        </div>
        
        <!-- Game Over Screen -->
        <div id="gameover-screen" class="screen gameover-screen" role="region" aria-label="Game Over Screen">
            <div class="result-icon incorrect-icon" aria-hidden="true">‚úó</div>
            <p class="message">Game Over!</p>
            
            <div class="stats">
                <div class="stat">
                    <span>Final Score:</span>
                    <span id="final-score">0</span>
                </div>
                <div class="stat">
                    <span>Time Spent:</span>
                    <span id="final-time">0</span> seconds
                </div>
            </div>
            
            <button id="restart-btn" class="btn">Play Again</button>
        </div>
        
        <!-- Congratulations Screen -->
        <div id="congrats-screen" class="screen congrats-screen" role="region" aria-label="Congratulations Screen">
            <div class="result-icon congrats-icon" aria-hidden="true">üèÜ</div>
            <p class="message">Congratulations!</p>
            <p>You completed all the words!</p>
            
            <div class="stats">
                <div class="stat">
                    <span>Total Score:</span>
                    <span id="total-score">0</span>
                </div>
                <div class="stat">
                    <span>Total Time:</span>
                    <span id="total-time">0</span> seconds
                </div>
                <div class="stat">
                    <span>Perfect Score!</span>
                    <span>üéâ</span>
                </div>
            </div>
            
            <button id="play-again-btn" class="btn">Play Again</button>
        </div>
        
        <!-- Practice Screen -->
        <div id="practice-screen" class="screen" role="region" aria-label="Practice Mode Screen">
            <h2>Practice Mode</h2>
            <div class="emoji-display" id="practice-emoji" aria-hidden="true"></div>
            <div class="letter-display" id="practice-letter"></div>
            <button id="practice-audio-btn" class="audio-btn" aria-label="Play audio">üîä Hear the word</button>
            <div class="navigation">
                <button id="practice-prev-btn" class="btn">Previous</button>
                <button id="practice-next-btn" class="btn">Next</button>
            </div>
            <button id="back-to-start-btn" class="btn">Back to Start</button>
        </div>
    </div>
    
    <script>
        // Ensure DOM is fully loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Game data
            const dictionary = [
                { word: 'apple', image: 'üçè', sound: 'a' },
                { word: 'ball', image: '‚öΩ', sound: 'b' },
                { word: 'cat', image: 'üêà', sound: 'c' },
                { word: 'duck', image: 'ü¶Ü', sound: 'd' },
                { word: 'egg', image: 'ü•ö', sound: 'e' },
                { word: 'fish', image: 'üêü', sound: 'f' },
                { word: 'goat', image: 'üêè', sound: 'g' },
                { word: 'hat', image: 'üé©', sound: 'h' },
                { word: 'iguana', image: 'ü¶é', sound: 'i' },
                { word: 'jet', image: 'üöÄ', sound: 'j' },
                { word: 'koala', image: 'üê®', sound: 'k' },
                { word: 'lip', image: 'üëÑ', sound: 'l' },
                { word: 'man', image: 'üë®üèΩüíº', sound: 'm' },
                { word: 'note', image: 'üóíÔ∏è', sound: 'n' },
                { word: 'orange', image: 'üçä', sound: 'o' },
                { word: 'pin', image: 'ü™°', sound: 'p' },
                { word: 'queen', image: 'üë∏üèº', sound: 'q' },
                { word: 'ring', image: 'üíç', sound: 'r' },
                { word: 'sun', image: 'üåû', sound: 's' },
                { word: 'tongue', image: 'üëÖ', sound: 't' },
                { word: 'umbrella', image: '‚òÇÔ∏è', sound: 'u' },
                { word: 'van', image: 'üöê', sound: 'v' },
                { word: 'watermelon', image: 'üçâ', sound: 'w' },
                { word: 'box', image: 'üì¶', sound: 'x' },
                { word: 'yellow', image: 'üü®', sound: 'y' },
                { word: 'zebra', image: 'ü¶ì', sound: 'z' }
            ];
            
            // Game state
            let currentWordIndex = 0;
            let score = 0;
            let startTime;
            let timerInterval;
            let gameActive = false;
            let practiceIndex = 0;
            
            // Check for SpeechSynthesis support
            const isSpeechSupported = 'speechSynthesis' in window;
            
            // DOM elements for game mode
            const startScreen = document.getElementById('start-screen');
            const gameScreen = document.getElementById('game-screen');
            const correctScreen = document.getElementById('correct-screen');
            const gameoverScreen = document.getElementById('gameover-screen');
            const congratsScreen = document.getElementById('congrats-screen');
            const emojiDisplay = document.getElementById('emoji-display');
            const audioBtn = document.getElementById('audio-btn');
            const optionsContainer = document.getElementById('options-container');
            const scoreDisplay = document.getElementById('score');
            const totalDisplay = document.getElementById('total');
            const timerDisplay = document.getElementById('timer');
            const progressBar = document.getElementById('progress-bar');
            const finalScore = document.getElementById('final-score');
            const finalTime = document.getElementById('final-time');
            const totalScore = document.getElementById('total-score');
            const totalTime = document.getElementById('total-time');
            
            // DOM elements for practice mode
            const practiceScreen = document.getElementById('practice-screen');
            const practiceEmoji = document.getElementById('practice-emoji');
            const practiceLetter = document.getElementById('practice-letter');
            const practiceAudioBtn = document.getElementById('practice-audio-btn');
            const prevBtn = document.getElementById('practice-prev-btn');
            const nextBtn = document.getElementById('practice-next-btn');
            const backToStartBtn = document.getElementById('back-to-start-btn');
            
            // Game mode buttons
            const startBtn = document.getElementById('start-btn');
            const practiceBtn = document.getElementById('practice-btn');
            const gameNextBtn = document.getElementById('next-btn');
            const restartBtn = document.getElementById('restart-btn');
            const playAgainBtn = document.getElementById('play-again-btn');
            
            // Disable audio buttons if speech synthesis is not supported
            if (!isSpeechSupported) {
                audioBtn.disabled = true;
                practiceAudioBtn.disabled = true;
            }
            
            // Initialize game
            function initGame() {
                try {
                    currentWordIndex = 0;
                    score = 0;
                    gameActive = true;
                    startTime = new Date();
                    
                    scoreDisplay.textContent = score;
                    totalDisplay.textContent = dictionary.length;
                    
                    clearInterval(timerInterval);
                    timerInterval = setInterval(updateTimer, 1000);
                    updateTimer();
                    
                    showScreen(gameScreen);
                    loadWord();
                } catch (error) {
                    console.error('Error initializing game:', error);
                    alert('An error occurred while starting the game. Please try again.');
                }
            }
            
            // Load current word for game mode
            function loadWord() {
                try {
                    const currentWord = dictionary[currentWordIndex];
                    emojiDisplay.textContent = currentWord.image;
                    progressBar.style.width = `${(currentWordIndex / dictionary.length) * 100}%`;
                    progressBar.setAttribute('aria-valuenow', Math.round((currentWordIndex / dictionary.length) * 100));
                    generateOptions(currentWord.sound);
                } catch (error) {
                    console.error('Error loading word:', error);
                }
            }
            
            // Generate letter options for game mode
            function generateOptions(correctSound) {
                try {
                    optionsContainer.innerHTML = '';
                    const options = [correctSound.toLowerCase()];
                    
                    while (options.length < 3) {
                        const randomChar = String.fromCharCode(97 + Math.floor(Math.random() * 26));
                        if (randomChar !== correctSound.toLowerCase() && !options.includes(randomChar)) {
                            options.push(randomChar);
                        }
                    }
                    
                    shuffleArray(options);
                    
                    options.forEach(letter => {
                        const button = document.createElement('button');
                        button.className = 'option';
                        button.textContent = letter.toUpperCase();
                        button.dataset.letter = letter;
                        button.setAttribute('role', 'radio');
                        button.setAttribute('aria-checked', 'false');
                        button.addEventListener('click', () => checkAnswer(button, correctSound));
                        button.addEventListener('keydown', (e) => {
                            if (e.key === 'Enter' || e.key === ' ') {
                                checkAnswer(button, correctSound);
                            }
                        });
                        optionsContainer.appendChild(button);
                    });
                } catch (error) {
                    console.error('Error generating options:', error);
                }
            }
            
            // Shuffle array (Fisher-Yates algorithm)
            function shuffleArray(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
            }
            
            // Check if answer is correct in game mode
            function checkAnswer(button, correctSound) {
                if (!gameActive) return;
                
                gameActive = false;
                disableOptions();
                
                try {
                    const selectedLetter = button.dataset.letter;
                    button.classList.add('selected');
                    button.setAttribute('aria-checked', 'true');
                    
                    if (selectedLetter.toLowerCase() === correctSound.toLowerCase()) {
                        score++;
                        scoreDisplay.textContent = score;
                        button.classList.add('correct');
                        setTimeout(() => {
                            currentWordIndex++;
                            if (currentWordIndex < dictionary.length) {
                                showScreen(correctScreen);
                                setTimeout(() => {
                                    gameActive = true;
                                    showScreen(gameScreen);
                                    loadWord();
                                }, 1000);
                            } else {
                                endGame(true);
                            }
                        }, 500);
                    } else {
                        button.classList.add('incorrect');
                        setTimeout(() => {
                            endGame(false);
                        }, 500);
                    }
                } catch (error) {
                    console.error('Error checking answer:', error);
                    gameActive = true;
                    enableOptions();
                }
            }
            
            // Disable options to prevent multiple clicks
            function disableOptions() {
                const options = optionsContainer.querySelectorAll('.option');
                options.forEach(opt => {
                    opt.disabled = true;
                    opt.setAttribute('aria-disabled', 'true');
                });
            }
            
            // Enable options
            function enableOptions() {
                const options = optionsContainer.querySelectorAll('.option');
                options.forEach(opt => {
                    opt.disabled = false;
                    opt.setAttribute('aria-disabled', 'false');
                });
            }
            
            // Update timer for game mode
            function updateTimer() {
                if (!gameActive) return;
                try {
                    const currentTime = new Date();
                    const seconds = Math.floor((currentTime - startTime) / 1000);
                    timerDisplay.textContent = seconds;
                } catch (error) {
                    console.error('Error updating timer:', error);
                }
            }
            
            // End game
            function endGame(isWin) {
                try {
                    clearInterval(timerInterval);
                    const currentTime = new Date();
                    const seconds = Math.floor((currentTime - startTime) / 1000);
                    
                    if (isWin) {
                        totalScore.textContent = `${score}/${dictionary.length}`;
                        totalTime.textContent = seconds;
                        showScreen(congratsScreen);
                    } else {
                        finalScore.textContent = `${score}/${dictionary.length}`;
                        finalTime.textContent = seconds;
                        showScreen(gameoverScreen);
                    }
                } catch (error) {
                    console.error('Error ending game:', error);
                }
            }
            
            // Show a specific screen
            function showScreen(screen) {
                try {
                    startScreen.classList.remove('active');
                    gameScreen.classList.remove('active');
                    correctScreen.classList.remove('active');
                    gameoverScreen.classList.remove('active');
                    congratsScreen.classList.remove('active');
                    practiceScreen.classList.remove('active');
                    screen.classList.add('active');
                    screen.focus();
                } catch (error) {
                    console.error('Error showing screen:', error);
                }
            }
            
            // Speak a word (used in both modes)
            function speakWord(word) {
                try {
                    if (isSpeechSupported) {
                        speechSynthesis.cancel();
                        const utterance = new SpeechSynthesisUtterance(word);
                        utterance.rate = 0.8;
                        speechSynthesis.speak(utterance);
                    } else {
                        alert('Speech synthesis is not supported in this browser.');
                    }
                } catch (error) {
                    console.error('Error speaking word:', error);
                }
            }
            
            // Initialize practice mode
            function initPracticeMode() {
                try {
                    practiceIndex = 0;
                    showScreen(practiceScreen);
                    loadPracticeWord();
                } catch (error) {
                    console.error('Error initializing practice mode:', error);
                    alert('An error occurred while starting practice mode. Please try again.');
                }
            }
            
            // Load current word for practice mode
            function loadPracticeWord() {
                try {
                    const currentWord = dictionary[practiceIndex];
                    practiceEmoji.textContent = currentWord.image;
                    practiceLetter.textContent = currentWord.sound.toUpperCase();
                    prevBtn.disabled = practiceIndex === 0;
                    nextBtn.disabled = practiceIndex === dictionary.length - 1;
                    prevBtn.setAttribute('aria-disabled', practiceIndex === 0 ? 'true' : 'false');
                    nextBtn.setAttribute('aria-disabled', practiceIndex === dictionary.length - 1 ? 'true' : 'false');
                } catch (error) {
                    console.error('Error loading practice word:', error);
                }
            }
            
            // Event listeners for game mode
            startBtn.addEventListener('click', initGame);
            gameNextBtn.addEventListener('click', () => {
                gameActive = true;
                showScreen(gameScreen);
                loadWord();
            });
            restartBtn.addEventListener('click', initGame);
            playAgainBtn.addEventListener('click', initGame);
            audioBtn.addEventListener('click', () => {
                if (gameActive) {
                    speakWord(dictionary[currentWordIndex].word);
                }
            });
            
            // Event listeners for practice mode
            practiceBtn.addEventListener('click', initPracticeMode);
            practiceAudioBtn.addEventListener('click', () => {
                speakWord(dictionary[practiceIndex].word);
            });
            prevBtn.addEventListener('click', () => {
                try {
                    if (practiceIndex > 0) {
                        practiceIndex--;
                        loadPracticeWord();
                    }
                } catch (error) {
                    console.error('Error on Previous button click:', error);
                }
            });
            nextBtn.addEventListener('click', () => {
                try {
                    if (practiceIndex < dictionary.length - 1) {
                        practiceIndex++;
                        loadPracticeWord();
                    }
                } catch (error) {
                    console.error('Error on Next button click:', error);
                }
            });
            backToStartBtn.addEventListener('click', () => {
                showScreen(startScreen);
            });
            
            // Keyboard navigation for accessibility
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Tab' && gameScreen.classList.contains('active')) {
                    const options = optionsContainer.querySelectorAll('.option');
                    if (options.length > 0) {
                        options[0].focus();
                        e.preventDefault();
                    }
                }
            });
            
            // Initialize total display
            totalDisplay.textContent = dictionary.length;
        });
    </script>
</body>
</html>